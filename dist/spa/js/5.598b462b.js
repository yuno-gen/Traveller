(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[5],{"8b24":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"flex column"},[a("q-parallax",{attrs:{height:346,speed:.5},scopedSlots:t._u([{key:"media",fn:function(){return[a("img",{attrs:{src:"https://static.tacdn.com/img2/brand/home/home1021_dt.webp"}})]},proxy:!0}])},[[a("div",{staticStyle:{width:"600px"}},[a("q-select",{attrs:{value:t.search,placeholder:" Search","bg-color":"white",rounded:"",outlined:"","use-input":"","hide-selected":"","fill-input":"","hide-dropdown-icon":"",options:t.autoList},on:{"input-value":t.setSearch,input:t.getAutoComplete,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.getDataBySearch.apply(null,arguments)}},scopedSlots:t._u([{key:"no-option",fn:function(){return[a("q-item",[a("q-item-section",{staticClass:"text-grey"},[t._v("\n            No results\n          ")])],1)]},proxy:!0},{key:"append",fn:function(){return[a("q-btn",{attrs:{to:"/citysearchpage",round:"",dense:"",flat:"",icon:"search"},on:{click:t.getDataBySearch}})]},proxy:!0}])})],1)]],2)],1)},o=[],i=(a("18d6"),{name:"PageIndex",data(){return{search:"",travelData:null,searchInfo:[],autoList:[],travelInfo:[],lat:21.1458,lon:79.0882,apiUrl:"https://discover.search.hereapi.com/v1/discover",apiUrlAuto:"https://autocomplete.search.hereapi.com/v1/autocomplete",apiKey:"BPW-o8N1SNyob4s9eQhPlJsOuHEGSgcZOLrEWOh-0Nw"}},methods:{setSearch(t){this.search=t,this.getAutoComplete()},getLocation(){this.$q.loading.show(),this.$q.platform.is.electron?this.$axios.get("https://freegeoip.app/json/").then((t=>{this.lat=t.data.latitude,this.lon=t.data.longitude,this.getWeatherByCoords()})):navigator.geolocation.getCurrentPosition((t=>{console.log("position: ",t),this.lat=t.coords.latitude,this.lon=t.coords.longitude,this.getWeatherByCoords()}))},getWeatherByCoords(){this.$q.loading.show(),this.$axios(`${this.apiUrl}?lat=${this.lat}&lon=${this.lon}&appid=${this.apiKey}&units=metric`).then((t=>{this.weatherData=t.data,this.$q.loading.hide()}))},getAutoComplete(){this.autoList=[],this.search.length>2&&this.$axios(`${this.apiUrlAuto}?q=${this.search}&apiKey=${this.apiKey}&units=metric`).then((t=>{console.log("auto.data: ",t.data),t.data.items.forEach((t=>{if("street"!=t.resultType){let e={title:t.title,address:t.address};this.autoList.push(e.address.label)}})),console.log(this.autoList)}))},getDataBySearch(){this.searchInfo=[],this.$axios(`${this.apiUrl}?at=${this.lat},${this.lon}&q=${this.search}&apiKey=${this.apiKey}&units=metric`).then((t=>{console.log("response.data: ",t.data),t.data.items.forEach((t=>{let e={title:t.title,resultType:t.resultType,address:t.address,position:t.position};this.searchInfo.push(e)})),this.lat=this.searchInfo[0].position.lat,this.lon=this.searchInfo[0].position.lng,this.search&&(this.$q.localStorage.set("searchName",this.search),this.$router.push("/citysearchpage"))})).catch((t=>{console.log("error : ",t),this.dataError()})),console.log("searchInfo: ",this.searchInfo)},dataError(){this.$q.notify({message:"Unable to fetch data",color:"purple"}),this.$q.dialog({title:"Error",message:"Could not find your location"})}}}),r=i,n=a("2877"),h=a("9989"),l=a("639d"),c=a("27f9"),p=a("9c40"),d=a("ddd8"),u=a("66e5"),g=a("4074"),y=a("0016"),f=a("eebe"),m=a.n(f),$=Object(n["a"])(r,s,o,!1,null,null,null);e["default"]=$.exports;m()($,"components",{QPage:h["a"],QParallax:l["a"],QInput:c["a"],QBtn:p["a"],QSelect:d["a"],QItem:u["a"],QItemSection:g["a"],QIcon:y["a"]})}}]);