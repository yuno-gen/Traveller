(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{1704:function(t,e,s){"use strict";s("6c0b")},6095:function(t,e,s){"use strict";s.r(e);var a=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("transition",{attrs:{appear:"","enter-active-class":"animated backInLeft","leave-active-class":"animated backOutLeft"}},[s("WeatherData",{attrs:{search:this.search,showBanner:t.showBanner,weatherInfo:this.weatherInfo[0]},on:{closeBanner:function(e){t.showBanner=!1}}})],1),s("q-page",{staticClass:"constrain q-pa-md"},[s("div",{staticClass:"row q-gutter-xl justify-center"},[s("q-btn",{attrs:{color:"white","text-color":"black",outline:"","icon-right":"hotel",ripple:{color:"blue"},label:"Hotels"},on:{click:t.getHotels}}),s("q-btn",{attrs:{color:"white","text-color":"black",outline:"",ripple:{color:"blue"},"icon-right":"restaurant",label:"Restaurant"},on:{click:t.getRestaurants}}),s("q-btn",{attrs:{color:"white","text-color":"black",outline:"",ripple:{color:"blue"},"icon-right":"tour",label:"Activites"},on:{click:t.getAttractions}}),s("q-btn",{attrs:{color:"white","text-color":"black",outline:"","icon-right":"mail",ripple:{color:"blue"},label:"Suggestions"},on:{click:function(e){t.showRoute=!0}}})],1),t.loadingPlaces?[s("q-card",{attrs:{flat:""}},[s("q-card-section",{staticClass:"text-h2 text-bold q-px-none"},[s("tr",[s("th",[s("span",{staticClass:"text-orange-6"},[t._v("Explore ")])]),s("th",{staticClass:"text-right",staticStyle:{width:"400px"}},[s("q-skeleton",{attrs:{type:"text"}})],1)])]),s("div",{staticClass:"row no-wrap"},[s("div",[s("q-card-section",{staticClass:"q-pa-sm"},[s("q-skeleton",{attrs:{height:"505px",width:"500px",square:""}})],1)],1),s("div",{staticClass:"column"},t._l(2,(function(t){return s("div",{key:t},[s("q-card-section",{staticClass:"q-pa-sm"},[s("q-skeleton",{attrs:{height:"250px",width:"250px",square:""}})],1)],1)})),0)])],1),s("div",{staticClass:"row"},t._l(3,(function(e){return s("div",{key:e,staticClass:"col-3 q-ma-sm"},t._l(3,(function(t){return s("div",{key:t,staticClass:"q-pt-md"},[s("q-card",{staticClass:"mycard"},[s("div",[s("q-skeleton",{attrs:{width:"100%",height:"200px",square:""}})],1),s("q-card-section",{staticClass:"p-mt-xl"},[s("div",{staticClass:"row no-wrap"},[s("div",{staticClass:"col text-h6 ellipsis"},[s("q-skeleton",{attrs:{square:""}})],1)]),s("div",{staticClass:"text-subtitle1 text-caption"},[s("q-skeleton",{attrs:{type:"text"}})],1),s("div",[s("q-skeleton",{attrs:{type:"text"}})],1)]),s("q-card-section",{staticClass:"q-pt-none"})],1)],1)})),0)})),0)]:[t.searchData[0].is_top_result?s("q-card",{attrs:{flat:""}},[s("q-card-section",{staticClass:"text-h2 text-bold q-px-none"},[s("span",{staticClass:"text-orange-6"},[t._v("Explore")]),t._v("\n          "+t._s(t.search)+"\n        ")]),s("div",{staticClass:"row no-wrap"},[s("div",[s("q-card-section",{staticClass:"q-pa-sm"},[s("img",{staticStyle:{height:"505px",width:"500px"},attrs:{src:t.images[0].images.large.url,alt:""}})])],1),s("div",{staticClass:"column"},t._l(2,(function(e){return s("div",{key:e},[s("q-card-section",{staticClass:"q-pa-sm"},[s("img",{staticStyle:{height:"250px",width:"250px"},attrs:{src:t.images[e].images.medium.url,alt:""}})])],1)})),0)])],1):t._e(),s("div",{staticClass:"row"},t._l(t.searchData,(function(e){return s("div",{key:e.id,staticClass:"col-3 q-ma-sm"},[e.is_top_result?t._e():s("div",{staticClass:"q-pt-md"},[s("q-card",{staticClass:"mycard"},[e.result_object.photo?s("div",[s("q-img",{staticStyle:{height:"200px"},attrs:{src:e.result_object.photo.images.small.url}})],1):s("div",[s("q-img",{attrs:{src:"https://i.imgur.com/IIvismu.jpeg"}})],1),s("q-card-section",[s("div",{staticClass:"row no-wrap"},[s("div",{staticClass:"col text-h6 ellipsis"},[t._v("\n                    "+t._s(e.result_object.name)+"\n                  ")])]),s("div",{staticClass:"text-subtitle1 text-caption"},[t._v("\n                  "+t._s(e.result_object.address)+"\n                ")]),s("div",[s("q-rating",{attrs:{value:parseInt(e.result_object.rating,10),max:5,size:"32px"}})],1)]),s("q-card-section",{staticClass:"q-pt-none"})],1)],1)])})),0)],s("card-for-data",{attrs:{showRoute:t.showRoute,suggestedRoute:this.suggestedRoute},on:{closeDialog:function(e){t.showRoute=!1}}})],2)],1)},r=[],i=(s("4e82"),function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("q-dialog",{model:{value:t.showRoute,callback:function(e){t.showRoute=e},expression:"showRoute"}},[s("q-card",{staticClass:"mycard"},[s("q-card-section",[s("div",{staticClass:"text-h6"},[t._v("\n        Suggestions for Day According to the distance .\n      ")])]),s("q-card-section",{staticClass:"q-mx-xl"},[s("div",[s("span",{staticClass:"q-pa-md text-caption"},[t._v("Suggested Hotel")]),s("div",{staticClass:"row"},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("1")]),s("span",{staticClass:"text-subtitle1 q-mx-md q-pa-sm"},[t._v(t._s(t.suggestedRoute.hotel.result_object.name))])],1),s("div",{staticClass:"q-pa-sm"},[s("q-separator",{attrs:{size:"5px"}}),s("span",[t._v(t._s(t.suggestedRoute.hotel.result_object.time_restaurant))])],1),s("span",{staticClass:"q-pa-md text-caption"},[t._v("Suggested Restaurant")]),s("div",{staticClass:"row"},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("2")]),s("span",{staticClass:"text-subtitle1 q-mx-md q-pa-sm"},[t._v(t._s(t.suggestedRoute.restaurant.restaurant.result_object.name))])],1),s("div",{staticClass:"q-pa-sm"},[s("q-separator",{attrs:{size:"5px"}})],1),s("span",{staticClass:"q-pa-md text-caption"},[t._v("Suggested Things to do")]),s("div",{staticClass:"row"},[s("q-avatar",{attrs:{color:"primary","text-color":"white"}},[t._v("3")]),s("span",{staticClass:"text-subtitle1 q-mx-md q-pa-sm"},[t._v(t._s(t.suggestedRoute.attraction.attraction.result_object.name))])],1)])]),s("q-card-actions",{attrs:{align:"right"}},[s("q-btn",{attrs:{flat:"",label:"OK",color:"primary"},on:{click:function(e){return t.$emit("closeDialog")}}})],1)],1)],1)}),o=[],c={props:{showRoute:{type:Boolean,default:!1},suggestedRoute:{type:Object,default:null}}},n=c,l=(s("1704"),s("2877")),h=s("24e8"),u=s("f09f"),d=s("a370"),p=s("58a81"),g=s("cb32"),m=s("eb85"),f=s("4b7e"),v=s("9c40"),_=s("eebe"),b=s.n(_),q=Object(l["a"])(n,i,o,!1,null,null,null),x=q.exports;b()(q,"components",{QDialog:h["a"],QCard:u["a"],QCardSection:d["a"],QBadge:p["a"],QAvatar:g["a"],QSeparator:m["a"],QCardActions:f["a"],QBtn:v["a"]});var w=function(){var t=this,e=t.$createElement,s=t._self._c||e;return t.showBanner?s("div",{staticClass:"banner-container banner bg-primary"},[s("q-banner",{staticClass:" bg-grey-3 q-mb-md",scopedSlots:t._u([{key:"avatar",fn:function(){return[s("img",{staticStyle:{width:"80px",height:"64px"},attrs:{src:""+t.weatherInfo.day.condition.icon}})]},proxy:!0},{key:"action",fn:function(){return[s("q-btn",{attrs:{color:"primary","font-size":"22px",flat:"",label:"Ok","text-color":"grey-10"},on:{click:function(e){return t.$emit("closeBanner")}}})]},proxy:!0}],null,!1,2180880346)},[s("span",{staticClass:"text-bold text-h6"},[t._v("The weather in "+t._s(t.search)+" is "+t._s(t.weatherInfo.day.condition.text)+" today")])])],1):t._e()},y=[],C={props:{showBanner:{type:Boolean,default:!1},weatherInfo:{type:Object,default:null},search:{type:String,default:"Nagpur"}}},D=C,R=s("54e1"),k=Object(l["a"])(D,w,y,!1,null,null,null),j=k.exports;b()(k,"components",{QBanner:R["a"],QBtn:v["a"]});var I=s("18d6"),S={name:"SearchCityPage",components:{CardForData:x,WeatherData:j},data(){return{search:"",showRoute:!1,loadingPlaces:!1,showBanner:!0,travelData:null,showHotels:!0,showRes:!0,showAttraction:!0,searchInfo:{},Preferences:[],restaurants:[],suggestedRestaurants:[],hotels:[],selectedHotel:{},weatherInfo:[],attractions:[],travelInfo:[],searchData:[],suggestedRoute:{},images:[],lat:21.1458,lon:79.0882,apiUrl:"https://discover.search.hereapi.com/v1/discover",apiUrlAuto:"https://autocomplete.search.hereapi.com/v1/autocomplete",apiKey:"BPW-o8N1SNyob4s9eQhPlJsOuHEGSgcZOLrEWOh-0Nw"}},computed:{},methods:{getDataBySearch(){this.getData(),this.searchInfo={},this.$axios(`${this.apiUrl}?at=${this.lat},${this.lon}&q=${this.search}&apiKey=${this.apiKey}&units=metric`).then((t=>{console.log("response.data: ",t.data),console.log("search:  ",this.search);let e={title:t.data.items[0].title,resultType:t.data.items[0].resultType,address:t.data.items[0].address,position:t.data.items[0].position};this.searchInfo=e,console.log("searchInfo: ",this.searchInfo),this.lat=this.searchInfo.position.lat,this.lon=this.searchInfo.position.lng,console.log("lat&lng: ",this.lat,this.lon)})).catch((t=>{console.log("error : ",t)})),console.log("searchInfo: ",this.searchInfo)},dataError(){this.$q.notify({message:"Unable to fetch data",color:"purple"})},getPreferences(t){this.$axios(`${this.apiUrl}?at=${this.lat},${this.lon}&q=${t}&apiKey=${this.apiKey}&units=metric`).then((e=>{e.data.items.forEach((e=>{let s={title:e.title,resultType:e.resultType,address:e.address,position:e.position};"restaurants"==t&&this.restaurants.push(s),"hotels"==t&&this.hotelPrefer.push(s),"attractions"==t&&this.attractions.push(s)}))})).catch((t=>{console.log("error : ",t),this.dataError()}))},showingData(t){this.showHotels=!1,this.showRes=!1,this.showAttraction=!1,"hotels"==t&&(this.showHotels=!0),"restaurants"==t&&(this.showRes=!0),"attractions"==t&&(this.showAttraction=!0)},getData(){var t={method:"GET",url:"https://travel-advisor.p.rapidapi.com/locations/search",params:{query:this.search,limit:"30",offset:"0",units:"km",location_id:"1",currency:"USD",sort:"relevance",lang:"en_US"},headers:{"x-rapidapi-host":"travel-advisor.p.rapidapi.com","x-rapidapi-key":"bf3cab535emsh3ccfb8412c87171p1c359ejsn0c463d05a172"}};this.loadingPlaces=!0,this.$axios.request(t).then((t=>{this.searchData=[],this.searchData=t.data.data,this.Preferences=this.searchData,this.searchData.forEach((t=>{this.images.push(t.result_object.photo)})),this.loadingPlaces=!1,console.log("getData: ",this.searchData),this.getBestHotel()})).catch((function(t){console.log("Error: ",t),this.loadingPlaces=!1}))},getHotels(){this.searchData=this.Preferences,this.searchData=this.searchData.filter((t=>"lodging"===t.result_type||"geos"===t.result_type)),console.log("gethOTELS: ",this.searchData)},getAttractions(){this.searchData=this.Preferences,this.searchData=this.searchData.filter((t=>"things_to_do"===t.result_type||"geos"===t.result_type)),console.log("getATTRAC: ",this.searchData)},getRestaurants(){this.searchData=this.Preferences,this.searchData=this.searchData.filter((t=>"restaurants"===t.result_type||"geos"===t.result_type)),console.log("getRest: ",this.searchData)},getWeather(){var t={method:"GET",url:"https://weatherapi-com.p.rapidapi.com/forecast.json",params:{q:this.search,days:"8"},headers:{"x-rapidapi-host":"weatherapi-com.p.rapidapi.com","x-rapidapi-key":"bf3cab535emsh3ccfb8412c87171p1c359ejsn0c463d05a172"}};this.$axios.request(t).then((t=>{this.weatherInfo=[],t.data.forecast.forecastday.forEach((t=>{let e={date:t.date,day:t.day,hour:t.hour};console.log("forEach data: ",e),this.weatherInfo.push(e)})),console.log("weatherData: ",this.weatherInfo)})).catch((function(t){console.error(t)}))},getDistanceFromLatLonInKm(t,e,s,a){var r=6371,i=this.deg2rad(s-t),o=this.deg2rad(a-e),c=Math.sin(i/2)*Math.sin(i/2)+Math.cos(this.deg2rad(t))*Math.cos(this.deg2rad(s))*Math.sin(o/2)*Math.sin(o/2),n=2*Math.atan2(Math.sqrt(c),Math.sqrt(1-c)),l=r*n;return l},deg2rad(t){return t*(Math.PI/180)},getBestHotel(){var t=[];this.suggestedRestaurants=[];var e=[];this.attractions=[],this.restaurants=this.searchData.filter((t=>"restaurants"===t.result_type)),this.hotels=this.searchData.filter((t=>"lodging"===t.result_type)),this.attractions=this.searchData.filter((t=>"things_to_do"===t.result_type||"activities"===t.result_type));var s=this.searchData[0];console.log("por: ",s),this.hotels.forEach((t=>{e.push({distance:this.getDistanceFromLatLonInKm(s.result_object.latitude,s.result_object.longitude,t.result_object.latitude,t.result_object.longitude),hotels:t})})),e=e.sort((function(t,e){return t.distance-e.distance})),console.log("suggestedHotels: ",e),this.selectedHotel=e[0].hotels,console.log("selectedHotel: ",this.selectedHotel),this.restaurants.forEach((t=>{this.suggestedRestaurants.push({distance:this.getDistanceFromLatLonInKm(this.selectedHotel.result_object.latitude,this.selectedHotel.result_object.longitude,t.result_object.latitude,t.result_object.longitude),restaurant:t})})),this.suggestedRestaurants=this.suggestedRestaurants.sort((function(t,e){return t.distance-e.distance})),this.attractions.forEach((e=>{t.push({distance:this.getDistanceFromLatLonInKm(this.suggestedRestaurants[0].restaurant.result_object.latitude,this.suggestedRestaurants[0].restaurant.result_object.longitude,e.result_object.latitude,e.result_object.longitude),attraction:e})})),t=t.sort((function(t,e){return t.distance-e.distance})),this.suggestedRoute={hotel:this.selectedHotel,restaurant:this.suggestedRestaurants[0],time_restaurant:this.suggestedRestaurants[0].distance/40,attraction:t[0],time_attraction:t[0].distance/40},console.log("suggestedRoute: ",this.suggestedRoute)}},created(){this.search=I["a"].getItem("searchName"),this.getDataBySearch(),this.getWeather(),this.getData()},destroyed(){}},B=S,E=(s("eee5"),s("9989")),$=s("068f"),H=s("daf4"),Q=s("293e"),P=Object(l["a"])(B,a,r,!1,null,null,null);e["default"]=P.exports;b()(P,"components",{QPage:E["a"],QBtn:v["a"],QCard:u["a"],QCardSection:d["a"],QImg:$["a"],QRating:H["a"],QSkeleton:Q["a"]})},"6c0b":function(t,e,s){},b630:function(t,e,s){},eee5:function(t,e,s){"use strict";s("b630")}}]);